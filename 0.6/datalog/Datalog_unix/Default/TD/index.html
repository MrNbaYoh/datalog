<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>TD (datalog.Datalog_unix.Default.TD)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">datalog</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Datalog_unix.Default.TD</span></h1></header><div class="spec module" id="module-Const"><a href="#module-Const" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Const = <a href="../../../Datalog_top_down/Default/index.html#module-Const">TopDown.Default.Const</a></code></div><div class="doc"></div></div><div class="spec type" id="type-const"><a href="#type-const" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>const</code><code><span class="keyword"> = </span><a href="Const/index.html#type-t">Const.t</a></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-set_debug"><a href="#val-set_debug" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_debug : bool <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><h3>Terms</h3><div class="spec module" id="module-T"><a href="#module-T" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="T/index.html">T</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>Literals</h3><div class="spec module" id="module-Lit"><a href="#module-Lit" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Lit/index.html">Lit</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>Clauses</h3><div class="spec module" id="module-C"><a href="#module-C" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="C/index.html">C</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>Substs</h3><p>This module is used for variable bindings.</p><div class="spec module" id="module-Subst"><a href="#module-Subst" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Subst/index.html">Subst</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>Unification, matching...</h3><div class="spec type" id="type-scope"><a href="#type-scope" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>scope</code><code><span class="keyword"> = </span><a href="Subst/index.html#type-scope">Subst.scope</a></code><code></code></div><div class="doc"></div></div><div class="spec exception" id="exception-UnifFail"><a href="#exception-UnifFail" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">UnifFail</span></code></div><div class="doc"></div></div><p>For <a href="index.html#val-unify">unify</a> and <a href="index.html#val-match_">match_</a>, the optional parameter <code class="code">oc</code> is used to
enable or disable occur-check. It is disabled by default.</p><div class="spec val" id="val-unify"><a href="#val-unify" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>unify : ?&#8288;oc:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;subst:<a href="Subst/index.html#type-t">Subst.t</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-scope">scope</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-scope">scope</a> <span class="keyword">&#8209;&gt;</span> <a href="Subst/index.html#type-t">Subst.t</a></code></div><div class="doc"><p>Unify the two terms.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">UnifFail</span>: if it fails</li></ul></div></div><div class="spec val" id="val-match_"><a href="#val-match_" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>match_ : ?&#8288;oc:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;subst:<a href="Subst/index.html#type-t">Subst.t</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-scope">scope</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-scope">scope</a> <span class="keyword">&#8209;&gt;</span> <a href="Subst/index.html#type-t">Subst.t</a></code></div><div class="doc"><p><code class="code">match_ a sa b sb</code> matches the pattern <code class="code">a</code> in scope <code class="code">sa</code> with term
<code class="code">b</code> in scope <code class="code">sb</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">UnifFail</span>: if it fails</li></ul></div></div><div class="spec val" id="val-alpha_equiv"><a href="#val-alpha_equiv" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>alpha_equiv : ?&#8288;subst:<a href="Subst/index.html#type-t">Subst.t</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-scope">scope</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-scope">scope</a> <span class="keyword">&#8209;&gt;</span> <a href="Subst/index.html#type-t">Subst.t</a></code></div><div class="doc"><p>Test for alpha equivalence.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">UnifFail</span>: if it fails</li></ul></div></div><div class="spec val" id="val-are_alpha_equiv"><a href="#val-are_alpha_equiv" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>are_alpha_equiv : <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Special version of <code class="code">alpha_equiv</code>, using distinct scopes for the two
terms to test, and discarding the result</p></div></div><div class="spec val" id="val-clause_are_alpha_equiv"><a href="#val-clause_are_alpha_equiv" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>clause_are_alpha_equiv : <a href="C/index.html#type-t">C.t</a> <span class="keyword">&#8209;&gt;</span> <a href="C/index.html#type-t">C.t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Alpha equivalence of clauses.</p></div></div><h3>Special built-in functions</h3><p>
The built-in functions are symbols that have a special <b>meaning</b>. The
meaning is given by a set of OCaml functions that can evaluate applications
of the function symbol to arguments.</p><p>For instance, <code class="code">sum</code> is a special built-in function that tries to add its
arguments if those are constants.</p><p><b>Note</b> that a constant will never be interpreted.</p><div class="spec module" id="module-BuiltinFun"><a href="#module-BuiltinFun" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="BuiltinFun/index.html">BuiltinFun</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><p>The following hashtables use alpha-equivalence checking instead of
regular, syntactic equality</p><div class="spec module" id="module-TVariantTbl"><a href="#module-TVariantTbl" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>TVariantTbl : Hashtbl.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-TVariantTbl">TVariantTbl</a>.key<span class="keyword"> = </span><a href="T/index.html#type-t">T.t</a></code></div><div class="doc"></div></div><div class="spec module" id="module-CVariantTbl"><a href="#module-CVariantTbl" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>CVariantTbl : Hashtbl.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-CVariantTbl">CVariantTbl</a>.key<span class="keyword"> = </span><a href="C/index.html#type-t">C.t</a></code></div><div class="doc"></div></div><h3>Index</h3><p>
An index is a specialized data structured that is used to efficiently
store and retrieve data by a key, where the key is a term. Retrieval
involves finding all data associated with terms that match,
or unify with, a given term.</p><div class="spec module" id="module-Index"><a href="#module-Index" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Index/index.html">Index</a> : <span class="keyword">functor</span> (<a href="Index/index.html#argument-1-Data">Data</a> : Hashtbl.HashedType) -&gt; <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>Rewriting</h3><p>
Rewriting consists in having a set of <b>rules</b>, oriented from left to right,
that we will write <code class="code">l -&gt; r</code> (say &quot;l rewrites to r&quot;). Any term t that l matches
is <b>rewritten</b> into r by replacing it by sigma(r), where sigma(l) = t.</p><div class="spec module" id="module-Rewriting"><a href="#module-Rewriting" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Rewriting/index.html">Rewriting</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>DB</h3><p>A DB stores facts and clauses, that constitute a logic program.
Facts and clauses can only be added.</p><p>Non-stratified programs will be rejected with NonStratifiedProgram.</p><div class="spec exception" id="exception-NonStratifiedProgram"><a href="#exception-NonStratifiedProgram" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">NonStratifiedProgram</span></code></div><div class="doc"></div></div><div class="spec module" id="module-DB"><a href="#module-DB" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="DB/index.html">DB</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span><span class="keyword"> with </span><span class="keyword">type </span><a href="DB/index.html#type-t">t</a><span class="keyword"> = </span><a href="../../../Datalog_top_down/Default/DB/index.html#type-t">TopDown.Default.DB.t</a></code></div><div class="doc"></div></div><h3>Query</h3><div class="spec val" id="val-ask"><a href="#val-ask" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ask : ?&#8288;oc:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;with_rules:<a href="C/index.html#type-t">C.t</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;with_facts:<a href="T/index.html#type-t">T.t</a> list <span class="keyword">&#8209;&gt;</span> <a href="DB/index.html#type-t">DB.t</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> list</code></div><div class="doc"><p>Returns the answers to a query in a given DB. Additional facts and rules can be
added in a local scope.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">oc</span>: enable occur-check in unification (default <code class="code">false</code>)</li></ul></div></div><div class="spec val" id="val-ask_lits"><a href="#val-ask_lits" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ask_lits : ?&#8288;oc:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;with_rules:<a href="C/index.html#type-t">C.t</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;with_facts:<a href="T/index.html#type-t">T.t</a> list <span class="keyword">&#8209;&gt;</span> <a href="DB/index.html#type-t">DB.t</a> <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> list <span class="keyword">&#8209;&gt;</span> <a href="Lit/index.html#type-t">Lit.t</a> list <span class="keyword">&#8209;&gt;</span> <a href="T/index.html#type-t">T.t</a> list</code></div><div class="doc"><p>Extension of <a href="index.html#val-ask">ask</a>, where the query ranges over the list of
variables (the term list), all of which must be bound in
the list of literals that form a constraint.</p><p><code class="code">ask_lits db vars lits</code> queries over variables <code class="code">vars</code> with
the constraints given by <code class="code">lits</code>.</p><p>Conceptually, the query adds a clause (v1, ..., vn) :- lits, which
should respect the same safety constraint as other clauses.</p><ul class="at-tag"><li><span class="at-tag return">Returns</span> a list of answers, each of which is a list of terms that
map to the given list of variables.</li></ul></div></div></body></html>